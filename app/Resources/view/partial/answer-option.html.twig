
{% set id = parent ~ '-' ~ key %}
{% set name = parent %}

{% if isSimpleOption and tableRowNum is null %}
    {% set inputClass = 'bn mt1 pointer' %}
    {% set name = parent %}
    {% set type = 'radio' %}
    {% set value = (textNum|number_format - parent|split('t')[1]|number_format) %}

{% elseif isMultipleOption and tableRowNum is null %}
    {% set inputClass = 'bn mt1 pointer' %}
    {% set name = parent ~ '[' ~ key ~ ']' %}
    {% set type = 'checkbox' %}
    {% set value = (textNum|number_format - parent|split('t')[1]|number_format) %}

{% elseif (isLibreOptionLarge or isLibreOptionSmall or isLibreOption) and tableRowNum is null %}
    {% set inputClass = 'br2-ns br--left-ns pl1' %}
    {% set inputClass = isLibreOptionLarge ? inputClass ~ ' w-' ~ metric.basics.percentages['l'] : inputClass %}
    {% set inputClass = isLibreOptionSmall ? inputClass ~ ' w-' ~ metric.basics.percentages['s'] : inputClass %}
    {% set inputClass = isLibreOption ? inputClass ~ ' w-' ~ metric.basics.percentages['m'] : inputClass %}
    {% set name = parent ~ '[' ~ key ~ ']' %}
    {% set type = 'text' %}
    {% set value = '' %}

{% elseif isSimpleOption %}
    {% set inputClass = 'bn mt1 pointer' %}
    {% set name = tableColNum is null ? name : name ~ '[' ~ column ~ ']' %}
    {% set type = 'radio' %}
    {% set value = tableColNum is null ? (textNum|number_format - parent|split('t')[1]|number_format) : tableColNum %}

{% elseif isMultipleOption %}
    {% set inputClass = 'bn mt1 pointer' %}
    {% set name = tableColNum is null ? name ~ '[' ~ key ~ ']' : name ~ '[' ~ column ~ ']' ~ '[' ~ key ~ ']' %}
    {% set type = 'checkbox' %}
    {% set value = tableColNum is null ? (textNum|number_format - parent|split('t')[1]|number_format) : tableColNum %}

{% elseif isLibreOptionLarge or isLibreOptionSmall or isLibreOption %}
    {% set inputClass = 'br2-ns br--left-ns pl1' %}
    {% set inputClass = isLibreOptionLarge ? inputClass ~ ' w-' ~ metric.basics.percentages['l'] : inputClass %}
    {% set inputClass = isLibreOptionSmall ? inputClass ~ ' w-' ~ metric.basics.percentages['s'] : inputClass %}
    {% set inputClass = isLibreOption ? inputClass ~ ' w-' ~ metric.basics.percentages['m'] : inputClass %}
    {% set name = tableColNum is null ? name ~ '[' ~ key ~ ']' : name ~ '[' ~ column ~ ']' ~ '[' ~ key ~ ']' %}
    {% set type = 'text' %}
    {% set value = '' %}
{% endif %}

{% set text %}
    {% include '@App/partial/fields/input.html.twig' %}
    <i class="blue f6">{{ value }}</i> {# TODO: comment/remove this line #}
    {{ text|default }}
    {% if media is not null and media['align'] is same as('cen') and media['since'] == textNum and media['till'] == textNum %}
        {% include '@App/partial/sample/' ~ media['tag'] ~ '-sample.html.twig' with { 'cssClassContent': media['width'], 'src': media['path'] } %}
    {% endif %}
{% endset %}

{% if isSimpleOption %}
    {% include '@App/partial/fields/label.html.twig' with { 'labelClass': 'dib pointer mr1' } %}
{% elseif isLibreOptionLarge or isLibreOptionSmall or isLibreOption %}
    {% include '@App/partial/fields/label.html.twig' %}
{% elseif isMultipleOption %}
    {% include '@App/partial/fields/label.html.twig' with { 'labelClass': 'dib pointer mr1' } %}
{% endif %}