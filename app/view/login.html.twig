{% extends 'layout.html.twig' %}

{% block title %}{{ title.eu }} {{ course }} {{ title.es }}{% endblock %}

{% block content %}
    <article class="cf ph4 pv2 tc">
        <div class="fl w-100 w-100-m w-50-ns tc">
            <img src="{{ logo_url }}" class="dib" title="{{ title.eu }} / {{ title.es }}"/>
        </div>
        <div class="fl w-100 w-100-m w-50-ns tc">
            <h3 class="navy ph0 mh0 fw6 w-100">{{ course }}</h3>
            <h3 class="f3 mb2"><strong>{{ title_label }}</strong></h3>
        </div>
    </article>
    <article id="has-bg-image" class="pv2 mh2 mh4-ns" style="background: url('{{ bg_url }}') no-repeat; background-size: cover;">
        <form action="{{ form_action }}" accept-charset="utf-8" method="post">
            <div class="pb3 dt v-top w-100 w-75-m w-75-ns white">
                {% include 'login/fields.html.twig' %}
            </div>
            <div class="mt3 w-100 tc">
                <a id="playAudioSample" href="" target="_self" title="{{ audio_sample_tip }}">
                    <i class="fa fa-play fa-inverse fa-5x">
                        <audio id="audioSample" preload>
                            <source src="{{ audio_sample_url.mp3 }}" type="audio/mpeg">
                            <source src="{{ audio_sample_url.ogg }}" type="audio/ogg">
                        </audio>
                    </i>
                </a>
            </div>
            <div class="mt3 w-100 tc">
                <input name="fperiodo" id="fperiodo" type="hidden" value="{{ course }}"/>
                <input class="f5 link dim br2 ph3 pv2 mb2 dib white bg-navy" type="submit" value="{{ submit_text }}"/>
            </div>
        </form>
    </article>
    <article class="cf ph4 pv2 tc">
        <div class="fl w-100 tc">
            <img src="{{ logo_url_footer }}" class="dib" title="{{ title.eu }} / {{ title.es }}"/>
        </div>
    </article>
{% endblock %}

{% block javascript %}
    <script type="text/javascript" src="./vendor/jquery/dist/jquery.min.js"></script>
    <script type="text/javascript" src="./vendor/jquery-smartresize/jquery.debouncedresize.js"></script>
    <script type="text/javascript" src="./vendor/jquery-smartresize/jquery.throttledresize.js"></script>
    <script type="text/javascript">
        $(function() {
            var _window = $(window),
                bgResize = function(_window) {
                    if (_window.width() < 944)
                        document.getElementById('has-bg-image').style.backgroundSize = '100% 100%';
                    else
                        document.getElementById('has-bg-image').style.backgroundSize = 'cover';
                };
            bgResize(_window);
            $('#playAudioSample').on('click', function(ev) {
                document.getElementById('audioSample').play();
                ev.preventDefault();
                return false;
            });
            _window.on('resize', function() {
                bgResize($(this));
                //console.log( 'Resize event fired:'+ (+new Date()) );
            });
            _window.on('debouncedresize', function() {
                bgResize($(this));
                //console.log( 'Debounce event fired:'+ (+new Date()) );
            });
            _window.on('throttledresize', function() {
                bgResize($(this));
                //console.log( 'Throttle event fired:'+ (+new Date()) );
            });
        });
    </script>
{% endblock %}